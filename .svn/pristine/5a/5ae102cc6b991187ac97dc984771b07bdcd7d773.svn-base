@{
    ViewData["Title"] = "Search Data";
    Layout = "~/Areas/SearchData/Views/Shared/_Layout_Search_Data.cshtml";
}

<!-- Time Filter -->
<div class="row g-3 mb-3 align-items-end">
    <div class="col-md-3 d-flex align-items-center">
        <label for="fromTime" class="form-label">Từ</label>
        <input type="datetime-local" id="fromTime" class="form-control" />
    </div>
    <div class="col-md-3 d-flex align-items-center">
        <label for="toTime" class="form-label">Đến</label>
        <input type="datetime-local" id="toTime" class="form-control" />
    </div>
    <div class="col-md-2">
        <button id="applyTime" class="btn btn-ne w-100">Áp dụng</button>
    </div>
</div>

<!-- KPI Cards -->
<div class="kpi-cards row">
    <div class="col-md-2 col-lg-1 col-sm-3 col-3">
        <div class="card text-white bg-total smaller-card">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <h5 class="card-title">Total Scan</h5>
                    <i class="fa fa-eye" id="view-total-scan" aria-hidden="true"></i>
                </div>
                <p class="card-text" id="scan-log">N/A</p>
            </div>
        </div>
    </div>
    <div class="col-md-2 col-lg-1 col-sm-3 col-3">
        <div class="card text-white bg-repair smaller-card">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <h5 class="card-title">Tìm Thấy</h5>
                    <i class="fa fa-eye" id="view-found-scan" aria-hidden="true"></i>
                </div>
                <p class="card-text" id="repairCount">N/A</p>
            </div>
        </div>
    </div>
</div>

<!-- Search List Overview -->
<div class="row my-4">
    <div class="col-12">
        <div class="card">
            <div class="card-body">
                <div class="table-responsive">
                    <table id="searchListsTable" class="table table-striped w-100">
                        <thead>
                            <tr>
                                <th>List Name</th>
                                <th>Tổng SN</th>
                                <th>Đã tìm thấy</th>
                                <th>Người tạo</th>
                                <th>Ngày tạo</th>
                                <th>Chi tiết</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Search List Detail Modal -->
<div class="modal fade" id="listDetailModal" tabindex="-1" aria-labelledby="listDetailTitle" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="listDetailTitle">Danh sách SerialNumber</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="table-responsive">
                    <table id="listItemsTable" class="table table-striped w-100">
                        <thead>
                            <tr>
                                <th>Serial Number</th>
                                <th>Đã tìm thấy</th>
                                <th>Thời gian scan</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Scan Summary Modal -->
<div class="modal fade" id="scanSummaryModal" tabindex="-1" aria-labelledby="scanSummaryTitle" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="scanSummaryTitle">Danh sách Serial Number</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="table-responsive">
                    <table id="scanSummaryTable" class="table table-striped w-100">
                        <thead>
                            <tr>
                                <th>Serial Number</th>
                                <th>List Name</th>
                                <th>Đã tìm thấy</th>
                                <th>Thời gian scan</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <style>

        .form-label{
            margin-bottom: 0px;
            padding: 5px;
        }
        .smaller-card {
            transform: scale(0.85); /* Reduce card size by 25% */
            margin: 0 -5px; /* Minimize spacing between cards */
        }

        .smaller-text .card-title {
            font-size: 1.5rem; /* Smaller title font size */
        }

        .smaller-text .card-text {
            font-size: 1.5rem; /* Smaller text font size */
        }

        .kpi-cards {
            display: flex;
            flex-wrap: nowrap; /* Keep cards in a single row */
        }

            .kpi-cards .col-md-2,
            .kpi-cards .col-lg-1,
            .kpi-cards .col-sm-3,
            .kpi-cards .col-3 {
                flex: 0 0 25%; /* Divide equally for 10 cards (100% / 10) */
                max-width: 25%; /* Ensure equal width */
                padding: 0; /* Reduce padding for tighter fit */
            }

        .detail-link {
            font-weight: 600;
            text-transform: uppercase;
        }
    </style>
    <script src="~/assets/areas/searchdata/js/searchData.js?v=@DateTime.Now.Ticks"></script>
}
