@{
    ViewData["Title"] = "Search Data";
    Layout = "~/Areas/SearchData/Views/Shared/_Layout_Search_Data.cshtml";
}

<!-- Time Filter -->
<div class="row g-3 mb-3 al;'./]ign-items-end">
    <div class="col-md-3 d-flex align-items-center">
        <label for="fromTime" class="form-label">T·ª´</label>
        <input type="datetime-local" id="fromTime" class="form-control" />
    </div>
    <div class="col-md-3 d-flex align-items-center">
        <label for="toTime" class="form-label">ƒê·∫øn</label>
        <input type="datetime-local" id="toTime" class="form-control" />
    </div>
    <div class="col-md-2">
        <button id="applyTime" class="btn btn-ne w-100">√Åp d·ª•ng</button>
    </div>
</div>

<!-- KPI Cards -->
<div class="kpi-cards row">
    <div class="col-md-2 col-lg-1 col-sm-3 col-3">
        <div class="card text-white bg-total smaller-card">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <h5 class="card-title">Total Scan</h5>
                    <i class="fa fa-eye" id="view-total-scan" aria-hidden="true"></i>
                </div>
                <p class="card-text" id="scan-log">N/A</p>
            </div>
        </div>
    </div>
    <div class="col-md-2 col-lg-1 col-sm-3 col-3">
        <div class="card text-white bg-repair smaller-card">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <h5 class="card-title">T√¨m Th·∫•y</h5>
                    <i class="fa fa-eye" id="view-found-scan" aria-hidden="true"></i>
                </div>
                <p class="card-text" id="repairCount">N/A</p>
            </div>
        </div>
    </div>
    <div class="col-md-2 col-lg-1 col-sm-3 col-3">
        <div class="card-body">
            <div class="d-flex justify-content-between align-items-center mb-2">
                <textarea id="serialNumber" class="form-control" rows="3" placeholder="Nh·∫≠p SerialNumber"></textarea>
            </div>
        </div>
    </div>
    <div class="col-md-2 col-lg-1 col-sm-3 col-3">
        <div class="card-body">
            <div class="d-flex justify-content-between align-items-center mb-2">
                <button id="search-btn" class="btn btn-ne w-100">T√¨m ki·∫øm</button>
            </div>
        </div>
    </div>
</div>

<!-- Search List Overview -->
<div class="row my-4">
    <div class="col-12">
        <div class="card">
            <div class="card-body">
                <div class="table-responsive">
                    <table id="searchListsTable" class="display table table-bordered table-striped datatable-table">
                        <thead>
                            <tr>
                                <th>List_Name</th>
                                <th>T·ªïng_SN</th>
                                <th>ƒê√£ t√¨m th·∫•y</th>
                                <th>Ng∆∞·ªùi t·∫°o</th>
                                <th>Ng√†y t·∫°o</th>
                                <th>Chi ti·∫øt</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Search List Detail Modal -->
<div class="modal fade" id="listDetailModal" tabindex="-1" aria-labelledby="listDetailTitle" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-lg-custom">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="listDetailTitle">Danh s√°ch SerialNumber</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="table-responsive">
                    <table id="listItemsTable" class="display table table-bordered table-striped datatable-table">
                        <thead>
                            <tr>
                                <th>Serial_Number</th>
                                <th>ƒê√£ t√¨m th·∫•y</th>
                                <th>Th·ªùi gian scan</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Scan Summary Modal -->
<div class="modal fade" id="scanSummaryModal" tabindex="-1" aria-labelledby="scanSummaryTitle" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-lg-custom">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="scanSummaryTitle">Danh s√°ch Serial Number</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="table-responsive">
                    <table id="scanSummaryTable" class="display table table-bordered table-striped datatable-table">
                        <thead>
                            <tr>
                                <th>Serial_Number</th>
                                <th>List_Name</th>
                                <th>ƒê√£ t√¨m th·∫•y</th>
                                <th>Th·ªùi gian scan</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal Search By SN-->
<div class="modal fade" id="serialModal" tabindex="-1" aria-labelledby="serialModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="serialModalLabel">K·∫øt qu·∫£ t√¨m ki·∫øm Serial Number</h5>
                <div class="ms-auto">
                    <button id="exportExcelBtn" class="btn btn-success btn-sm">üì•Excel</button>
                </div>
                <button type="button" class="btn-close ms-2" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <table class="table table-bordered table-striped" id="serialTable">
                    <thead>
                        <tr>
                            <th>Serial Number</th>
                            <th>Created At</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>
</div>
<div class="toast-container position-fixed top-0 end-0 p-3">
    <div id="noDataToast" class="toast align-items-center text-bg-danger border-0" role="alert">
        <div class="d-flex">
            <div class="toast-body">‚ö†Ô∏è Kh√¥ng t√¨m th·∫•y d·ªØ li·ªáu!</div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
        </div>
    </div>
</div>



@section Scripts {
    <style>

        .form-label {
            margin-bottom: 0px;
            padding: 5px;
        }

        .smaller-card {
            transform: scale(0.85); /* Reduce card size by 25% */
            margin: 0 -5px; /* Minimize spacing between cards */
        }

        .smaller-text .card-title {
            font-size: 1.5rem; /* Smaller title font size */
        }

        .smaller-text .card-text {
            font-size: 1.5rem; /* Smaller text font size */
        }

        .kpi-cards {
            display: flex;
            flex-wrap: nowrap; /* Keep cards in a single row */
        }

            .kpi-cards .col-md-2,
            .kpi-cards .col-lg-1,
            .kpi-cards .col-sm-3,
            .kpi-cards .col-3 {
                flex: 0 0 25%; /* Divide equally for 10 cards (100% / 10) */
                max-width: 25%; /* Ensure equal width */
                padding: 0; /* Reduce padding for tighter fit */
            }

        .detail-link {
            font-weight: 600;
            text-transform: uppercase;
        }
    </style>
    <script src="~/assets/areas/searchdata/js/searchData.js?v=@DateTime.Now.Ticks"></script>
}
