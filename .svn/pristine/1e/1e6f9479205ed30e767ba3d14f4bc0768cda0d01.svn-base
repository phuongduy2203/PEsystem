﻿@{
    ViewData["Title"] = "Scrap Area";
}
@{
    Layout = "~/Areas/Scrap/views/Shared/Layout_scrap.cshtml";
}

<!--nội dung trang Chức năng -->
<div class="container">
    <div class="row mb-3">
        <!-- Cột chọn loại chức năng -->
        <div class="col-md-3">
            <form id="search-form" class="form-inline">
                <select id="search-options" class="form-select">
                    <option selected disabled>SELECT FUNCTION</option>
                    <option value="INPUT_SN">INPUT SN</option>
                    <option value="CREATE_TASK_FORM">CREATE TASK FORM</option>
                    <option value="UPDATE_DATA">UPDATE DATA</option>
                    <option value="HISTORY_APPLY">HISTORY APPLY</option>
                </select>
            </form>
        </div>

        <!-- function area-->
        <div class="col-md-9">
            <!-- Form input SN -->
            <form id="input-sn-form" method="post" class="hidden" data-search-type="INPUT_SN">
                <div class="row align-items-end">
                    <div class="col-md-4">
                        <textarea name="serialNumbers" id="sn-input" class="form-control" rows="9" placeholder="Nhập Serial Number (mỗi dòng 1 SN)"></textarea>
                    </div>
                    <div class="col-md-4">
                        <div class="mb-2">
                            <label for="description-input" class="form-label">Description</label>
                            <input type="text" id="description-input" name="description" class="form-control" placeholder="Nhập mô tả">
                        </div>
                        <div class="mb-2">
                            <label for="NVmember-input" class="form-label">NV person approve</label>
                            <input type="text" id="NVmember-input" name="po" class="form-control" placeholder="Nhập tên khách hàng">
                            <select id="Scrap-options" class="form-select">
                                <option selected disabled>Select type scrap</option>
                                <option value="0">SPE approve to scrap</option>
                                <option value="1">SPE approve to BGA</option>
                            </select>
                        </div>
                        
                        <button id="input-sn-btn" class="btn btn-ne" type="button">INPUT SN</button>
                    </div>
                </div>
            </form>

            <!-- Form create task -->
            <form id="custom-form" method="post" class="hidden" data-search-type="CREATE_TASK_FORM">
                <div class="row align-items-end">
                    <div class="col-md-2">
                        <button id="create-task-btn" class="btn btn-ne" type="button">Create task</button>
                    </div>
                </div>
            </form>

            <!-- Form update data -->
            <form id="update-data-form" method="post" class="hidden" data-search-type="UPDATE_DATA">
                <div class="row align-items-end">
                    <div class="col-md-4">
                        <textarea name="serialNumbers" id="sn-input-update" class="form-control" rows="8" placeholder="Nhập Serial Number (mỗi dòng 1 SN)"></textarea>
                    </div>

                    <div class="col-md-4">
                        <div class="mb-2">
                            <label for="task-input" class="form-label">Task</label>
                            <input type="text" id="task-input" name="task" class="form-control" placeholder="Nhập Task">
                        </div>
                        <div class="mb-2">
                            <label for="po-input" class="form-label">PO</label>
                            <input type="text" id="po-input" name="po" class="form-control" placeholder="Nhập PO">
                        </div>
                        <button id="update-task-btn" class="btn btn-ne" type="button">Update</button>
                    </div>

                    <div class="col-md-4">
                        <div class="mb-2">
                            <label for="cost-input" class="form-label">Cost</label>
                            <input type="text" id="cost-input" name="cost" class="form-control" placeholder="Nhập Cost">
                        </div>
                        <div class="mb-2">
                            <label for="file-input" class="form-label">Upload Excel File (Board SN & Cost)</label>
                            <input type="file" id="file-input" name="file" class="form-control" accept=".xlsx, .xls">
                        </div>
                        <button id="update-cost-btn" class="btn btn-ne" type="button">Update Cost</button>
                    </div>
                </div>
            </form>

            <!-- Form history apply -->
            <form id="history-apply-form" method="post" class="hidden" data-search-type="HISTORY_APPLY_FORM">
                <div class="row align-items-end">
                    <div class="col-md-2">
                        <button id="create-history-task-btn" class="btn btn-ne" type="button">Data</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!--khu vực hiển thị chi tiết-->
    <div class="row mb-3">
        <!--hiển thị của chức năng input sn-->
        <div id="input-sn-result" class="hidden"></div>
        <!--hiển thị của chức năng create task-->
        <div id="create-task-result" class="hidden"></div>
        <!--hiển thị của chức năng update data-->
        <div id="update-data-result" class="hidden"></div>
        <!--hiển thị của chức năng update data-->
        <div id="history-apply-result" class="hidden"></div>
    </div>
</div>


<style>
    .hidden {
        display: none !important;
    }

    /* Container cho bảng để hỗ trợ cuộn ngang */
    .table-container {
        max-width: 100%;
        overflow-x: auto;
        margin-top: 10px;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        font-size: 14px; /* Tăng kích thước chữ để dễ đọc */
        table-layout: auto; /* Để các cột tự điều chỉnh theo nội dung */
    }

    th, td {
        padding: 10px 12px; /* Tăng padding để thoáng hơn */
        text-align: left;
        border: 1px solid #ddd; /* Viền rõ ràng hơn */
        white-space: nowrap; /* Ngăn nội dung xuống dòng */
    }

    th {
        background-color: #28a715; /* Màu xanh lá cây giống nút "Create task" (Bootstrap success) */
        color: white; /* Chữ trắng để dễ đọc */
        font-weight: bold;
        position: sticky; /* Giữ tiêu đề cố định khi cuộn */
        top: 0;
        z-index: 1;
    }

    td {
        background-color: rgba(255, 255, 255, 0.9); /* Nền trắng với độ mờ nhẹ */
    }

    /* Căn chỉnh cụ thể cho một số cột */
    th:nth-child(1), td:nth-child(1) { /* Cột checkbox */
        width: 40px; /* Chiều rộng cố định cho cột checkbox */
        text-align: center;
    }

    th:nth-child(6), td:nth-child(6), /* Cột Create Time */
    th:nth-child(8), td:nth-child(8), /* Cột Apply Time (chỉ trong HISTORY_APPLY) */
    th:nth-child(9), td:nth-child(9) { /* Cột Total Q'ty */
        text-align: center; /* Căn giữa */
    }

    /* Cột có nội dung dài (Description) */
    th:nth-child(3), td:nth-child(3) { /* Cột Description */
        white-space: normal; /* Cho phép xuống dòng */
        max-width: 300px; /* Giới hạn chiều rộng tối đa */
        word-wrap: break-word; /* Đảm bảo xuống dòng đúng */
    }

    /* Hiệu ứng hover để dễ theo dõi dòng */
    tr:hover td {
        background-color: rgba(200, 200, 200, 0.2); /* Nền xám nhạt khi hover */
    }

    /* Định dạng checkbox */
    .checkbox-column {
        width: 40px; /* Đảm bảo cột checkbox không quá hẹp */
        text-align: center;
    }

    /* Đảm bảo bảng không vượt quá container */
    table {
        min-width: 1200px; /* Đảm bảo bảng có chiều rộng tối thiểu để không bị co lại quá mức */
    }

    .pagination {
        display: flex;
        justify-content: center;
        align-items: center;
        margin-top: 10px;
    }

        .pagination button {
            margin: 0 5px;
            padding: 5px 10px;
            font-size: 14px;
        }

        .pagination span {
            font-size: 14px;
            color: #333;
        }
</style>

@section Scripts {
    <script src="~/assets/areas/scrap/js/function.js"></script>
}